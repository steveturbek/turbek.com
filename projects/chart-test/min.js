function timeoutDialog(){clearTimeout(setTimoutTimer);var a=confirm("You appear to have stopped playing.  Click OK to keep playing, cancel to cancel");if(a==true){draw_chart()}else{window.location.href="index.html"}}function console_log_with_alert_fallback_for_IE(a){if(hide_log_messages)return;try{console.log(a)}catch(b){alert(a)}}function roundNumber(a,b){var c=Math.round(a*Math.pow(10,b))/Math.pow(10,b);return c}function draw_chart(){$("#introText").hide();$("#chart_container").show();$("#score_container").hide();document.getElementById("userValue").value="";document.getElementById("userValue").focus();console_log_with_alert_fallback_for_IE(chart_type_array[current_chart_index]+" chart selected");var a=[];var b=[];flot_theme_options_style_modifications_index=Math.floor(Math.random()*chart_style_modification_objects_array.length);switch(chart_type_array[current_chart_index]){case"line":case"column":case"points":for(var c=0;c<number_of_series_in_chart;c++){a[c]=[c,Math.floor(Math.random()*98)+1];b[c]=[c,cities[Math.floor(Math.random()*100)]]}var d=Math.floor(Math.random()*number_of_series_in_chart);current_question_actual_value=a[d][1];$("#questionLine").html("How much is "+b[d][1]+"?");$.plot($("#default"),[a],jQuery.extend(true,{},flot_theme_options,{xaxis:{ticks:b}},chart_type_flot_variations[chart_type_array[current_chart_index]],chart_style_modification_objects_array[flot_theme_options_style_modifications_index]));break;case"bar":for(var c=0;c<number_of_series_in_chart;c++){a[c]=[Math.floor(Math.random()*98)+1,c];b[c]=[c,cities[Math.floor(Math.random()*100)]]}var d=Math.floor(Math.random()*number_of_series_in_chart);current_question_actual_value=a[d][0];$("#questionLine").html("How much is "+b[d][1]+"?");$.plot($("#default"),[a],jQuery.extend(true,{},flot_theme_options,{yaxis:{ticks:b}},chart_type_flot_variations[chart_type_array[current_chart_index]],chart_style_modification_objects_array[flot_theme_options_style_modifications_index]));break;case"pie":case"donut":case"tilted_pie":for(var c=0;c<number_of_series_in_chart;c++){a[c]={label:cities[Math.floor(Math.random()*100)],data:Math.ceil(Math.random()*100)+1}}var e=0;for(var c=0;c<number_of_series_in_chart;c++){e+=a[c].data}for(var c=0;c<number_of_series_in_chart;c++){a[c].data=Math.floor(a[c].data/e*100)}var d=Math.floor(Math.random()*number_of_series_in_chart);current_question_actual_value=a[d].data;$("#questionLine").html("What percent is "+a[d].label+"?");$.plot($("#default"),a,jQuery.extend(true,{},flot_theme_options,chart_type_flot_variations[chart_type_array[current_chart_index]],chart_style_modification_objects_array[flot_theme_options_style_modifications_index]));break}clearTimeout(setTimoutTimer);time_chart_was_drawn=new Date}function draw_next_chart(){if(current_chart_index<chart_type_array.length-1)current_chart_index+=1;else{current_chart_index=0}draw_chart()}function response_from_server(a){console_log_with_alert_fallback_for_IE("response_from_server:"+a.serverResponse)}function on_submit_user_value(){user_value=$("#userValue").val();if(user_value==""||!user_value.match(/^[0-9]+$/))return false;clearTimeout(setTimoutTimer);var c={};c["current_question_actual_value"]=current_question_actual_value;c["user_value"]=parseInt(user_value);c["milliseconds_to_answer"]=Math.floor(new Date-time_chart_was_drawn);c["chart_type"]=chart_type_array[current_chart_index];c["percent_off"]=Math.abs(current_question_actual_value-c["user_value"])/current_question_actual_value*100;c["chart_style_index"]=flot_theme_options_style_modifications_index;c["ignore"]=document.getElementById("ignore").checked;user_responses_array.push(c);$.ajax({type:"POST",url:"submit.php",dataType:"json",traditional:true,data:{answer:JSON.stringify(c)},success:response_from_server});console_log_with_alert_fallback_for_IE("sent to server");console_log_with_alert_fallback_for_IE({answer:JSON.stringify(c)});$("#chart_container").hide();$("#score_container").show();$("#score_total_header").html("The correct answer was "+c["current_question_actual_value"]+". Your entry, "+c["user_value"]+" was "+Math.floor(Math.abs(current_question_actual_value-c["user_value"]))+" points off ("+Math.round(c["percent_off"])+"%) and took "+roundNumber(c["milliseconds_to_answer"]/1e3,2)+" seconds");console_log_with_alert_fallback_for_IE(user_responses_array);var d={};d.data=new Array;d.label="You";var e={};e.data=new Array;e.label="You";for(a=0;a<chart_type_array.length;a++){var f=0;var g=0;var h=0;for(b=0;b<user_responses_array.length;b++){if(chart_type_array[a]==user_responses_array[b]["chart_type"]){f++;g+=user_responses_array[b]["percent_off"];h+=user_responses_array[b]["milliseconds_to_answer"]}}averageError=roundNumber(g/f,2);averageTime=roundNumber(h/f,2);if(f<2)continue;d.data[a]=new Array(a,averageError);e.data[a]=new Array(a,averageTime)}$("#stats_top_label").html(stats_chart_data.topLabelError);$("#stats_time_top_label").html(stats_chart_data.topLabelTime);if(user_responses_array.length>chart_type_array.length*2){$("#stats_charts_container_container_div").show();temp_stats_chart_data=new Array;temp_stats_chart_data.push(stats_chart_data.averagePercentWrongData[0]);temp_stats_chart_data_time=new Array;temp_stats_chart_data_time.push(stats_chart_data.millisecondsToAnswerData[0]);if(d.data.length>0){temp_stats_chart_data.push(d);temp_stats_chart_data_time.push(e)}$.plot($("#stats_chart"),temp_stats_chart_data,{colors:["#16193B","#7FB2F0","#4E7AC7","#35478C","#16193B","#07294A","#000000"],series:{points:{show:true},lines:{show:false}},xaxis:{ticks:stats_chart_data.xAxisTicksLabels},legend:{show:true}});$.plot($("#stats_time_chart"),temp_stats_chart_data_time,{colors:["#16193B","#7FB2F0","#4E7AC7","#35478C","#16193B","#07294A","#000000"],series:{points:{show:true},lines:{show:false}},xaxis:{ticks:stats_chart_data.xAxisTicksLabels},legend:{show:true}})}}function start_game(){console_log_with_alert_fallback_for_IE("start");draw_chart()}var hide_log_messages=true;var cities=["New York","Los Angeles","Chicago","Houston","Phoenix","Philadelphia","San Antonio","San Diego","Dallas","San Jose","Detroit","San Francisco","Jacksonville","Indianapolis","Austin","Columbus","Fort Worth","Charlotte","Memphis","Boston","Baltimore","El Paso","Seattle","Denver","Nashville-Davidson","Milwaukee","Washington","Las Vegas","Louisville","Portland","Oklahoma city","Tucson","Atlanta","Albuquerque","Kansas city","Fresno","Mesa","Sacramento","Long Beach","Omaha","Virginia Beach","Miami","Cleveland","Oakland","Raleigh","Colorado Springs","Tulsa","Minneapolis","Arlington","Honolulu","Wichita","St. Louis","New Orleans","Tampa","Santa Ana","Anaheim","Cincinnati","Bakersfield","Aurora","Toledo","Pittsburgh","Riverside","Lexington","Stockton","Corpus Christi","Anchorage","St. Paul","Newark","Plano","Buffalo","Henderson","Fort Wayne","Greensboro","Lincoln","Glendale","Chandler","St. Petersburg","Jersey city","Scottsdale","Orlando","Madison","Norfolk","Birmingham","Winston-Salem","Durham","Laredo","Lubbock","Baton Rouge","North Las Vegas","Chula Vista","Chesapeake","Gilbert town","Garland","Reno","Hialeah","Arlington","Irvine","Rochester","Akron","Boise"];var months=new Array("January ","February ","March ","April ","May ","June ","July ","August ","September ","October ","November ","December ");var time_chart_was_drawn=new Date;var number_of_series_in_chart=7;var chart_type_array=["line","pie","column","donut","bar","tilted_pie","points"];var current_chart_index=0;var user_responses_array=[];var current_question_actual_value=0;var setTimoutTimer;$(document).ready(function(){document.onkeypress=function(a){a=a||window.event;if(a.keyCode===13){if($("#chart_container").css("display")=="none"){draw_next_chart()}}return true}});var flot_theme_options={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:null,symbol:"circle"},lines:{lineWidth:3,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:0},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:"#ccc",tickColor:null,labelMargin:5,axisMargin:8,borderWidth:1,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}};var hacked_stroke_color_for_IE_donut_chart_hole="#fff";var chart_type_flot_variations={line:{xaxis:{tickLength:0}},column:{series:{bars:{show:true,fill:1,align:"right",barWidth:.75}},xaxis:{tickLength:0}},bar:{series:{bars:{horizontal:true,show:true,fill:1,align:"right",barWidth:.75}},lines:{show:false},points:{show:false},yaxis:{tickLength:0}},pie:{series:{pie:{show:true,stroke:{width:0}}}},tilted_pie:{series:{pie:{show:true,stroke:{width:0},tilt:.5}}},donut:{series:{pie:{show:true,innerRadius:.5,stroke:{width:0,color:hacked_stroke_color_for_IE_donut_chart_hole}}}},points:{series:{points:{show:true}}}};var greys={colors:["#111","#333","#666","#777","#999","#aaa","#ccc","#eee"]};var neon={colors:["#C2FF0A","#FF0A47","#FF0AC2","#FFAC00","#47FF0A","#0AC2FF","#FF5B00"]};var blues={colors:["#ADD5F7","#7FB2F0","#4E7AC7","#35478C","#16193B","#07294A","#000000"]};var Excel2000={colors:["#9999FF","#993366","#FFFFCC","#CCFFFF","#660066","#FF8080","#FF8080","#0066CC","#CCCCFF"],grid:{show:true,color:"#000",backgroundColor:"#C0C0C0",borderColor:"#000"}};var flot_theme_options_style_modifications_index=0;var chart_style_modification_objects_array=[{},greys,neon,blues,Excel2000]