$(document).ready(function() {

function converttoHHMMSS(secs){
	var t = new Date(1970,0,1);
	t.setSeconds(secs);
	return t.toTimeString().substr(0,8);
}


	$("#womens_finish_times_over_time #placeholder").bind("plothover", function (event, pos, item) {
	$("#x").text(pos.x.toFixed(2));
	$("#y").text(pos.y.toFixed(2));
	if (item) {
	$("#charttooltip").remove();
	var x = item.datapoint[0];//.toFixed(2),
	y = item.datapoint[1];//.toFixed(2);
	
	var d = new Date(x).getFullYear();
	
	
	showChartTooltip(item.pageX, item.pageY, item.series.label + " in " + d + ' was '+ converttoHHMMSS(y) );
	} else {
	$("#charttooltip").remove();
	}
	});
	
	var chart_data = {"seriesData":[{"data":[[344390400000,12129],[375926400000,11873],[407462400000,11744],[438998400000,11884],[470620800000,13061],[502156800000,12626],[533692800000,12742],[565228800000,12905],[596851200000,13027],[628387200000,12773],[659923200000,13187],[691459200000,13029],[723081600000,13076],[754617600000,13455],[786153600000,13532],[817689600000,13667],[849312000000,13507],[880848000000,13732],[912384000000,13517],[943920000000,13650],[975542400000,13542],[1007078400000,13300],[1038614400000,13598],[1070150400000,13873],[1101772800000,13881],[1133308800000,13762],[1164844800000,13339],[1196380800000,13259],[1228003200000,13123],[1259539200000,13247],[1291075200000,13333],[1322611200000,13224],[1385769600000,13485]],"label":"The fastest 20%"},{"data":[[344390400000,13816],[375926400000,13677],[407462400000,13556],[438998400000,13847],[470620800000,15222],[502156800000,14712],[533692800000,14611],[565228800000,14823],[596851200000,14935],[628387200000,14628],[659923200000,15194],[691459200000,14888],[723081600000,14890],[754617600000,15470],[786153600000,15565],[817689600000,15655],[849312000000,15431],[880848000000,15667],[912384000000,15544],[943920000000,15649],[975542400000,15596],[1007078400000,15501],[1038614400000,15668],[1070150400000,16152],[1101772800000,16250],[1133308800000,16064],[1164844800000,15359],[1196380800000,15327],[1228003200000,15129],[1259539200000,15182],[1291075200000,15263],[1322611200000,15254],[1385769600000,15320]],"label":"The second fastest 20%"},{"data":[[344390400000,14884],[375926400000,14874],[407462400000,14582],[438998400000,14981],[470620800000,16553],[502156800000,16058],[533692800000,15953],[565228800000,16166],[596851200000,16285],[628387200000,15862],[659923200000,16542],[691459200000,16166],[723081600000,16227],[754617600000,16812],[786153600000,16876],[817689600000,16960],[849312000000,16724],[880848000000,16984],[912384000000,16910],[943920000000,17034],[975542400000,17000],[1007078400000,16857],[1038614400000,17011],[1070150400000,17621],[1101772800000,17818],[1133308800000,17564],[1164844800000,16734],[1196380800000,16730],[1228003200000,16573],[1259539200000,16528],[1291075200000,16649],[1322611200000,16712],[1385769600000,16686]],"label":"The third fastest 20%"},{"data":[[344390400000,16123],[375926400000,16208],[407462400000,15902],[438998400000,16301],[470620800000,17956],[502156800000,17525],[533692800000,17338],[565228800000,17592],[596851200000,17791],[628387200000,17358],[659923200000,18084],[691459200000,17648],[723081600000,17765],[754617600000,18306],[786153600000,18349],[817689600000,18473],[849312000000,18153],[880848000000,18406],[912384000000,18349],[943920000000,18479],[975542400000,18511],[1007078400000,18318],[1038614400000,18588],[1070150400000,19227],[1101772800000,19536],[1133308800000,19184],[1164844800000,18262],[1196380800000,18256],[1228003200000,18157],[1259539200000,18063],[1291075200000,18306],[1322611200000,18355],[1385769600000,18281]],"label":"The fourth fastest 20%"},{"data":[[344390400000,18551],[375926400000,18670],[407462400000,18716],[438998400000,18932],[470620800000,20889],[502156800000,20507],[533692800000,20444],[565228800000,20858],[596851200000,21530],[628387200000,20836],[659923200000,21608],[691459200000,21268],[723081600000,21454],[754617600000,21779],[786153600000,21899],[817689600000,22272],[849312000000,21918],[880848000000,22117],[912384000000,22115],[943920000000,22385],[975542400000,22362],[1007078400000,21849],[1038614400000,22276],[1070150400000,22651],[1101772800000,23103],[1133308800000,22751],[1164844800000,21805],[1196380800000,21726],[1228003200000,21854],[1259539200000,21633],[1291075200000,21841],[1322611200000,21762],[1385769600000,21717]],"label":"The slowest 20%"}], "topLabel":"Women's finish times 1980 to 2013", "yAxis":"Seconds", "xAxis":"Year"};

	$("#womens_finish_times_over_time #top-label").html(chart_data.topLabel);
  
  	$("#womens_finish_times_over_time #x-axis-label").html(chart_data.xAxis);
	
	$("#womens_finish_times_over_time #y-axis-label").html(chart_data.yAxis);
	$("#womens_finish_times_over_time #y-axis-label").flipv_up();



	chart_style_options.xaxis.ticks = chart_data.xAxisTicksLabels;
	chart_style_options.colors =  ["#70B0FF", "#EB53F7"]; 
	chart_style_options.series.lines.fill=false;
	chart_style_options.series.lines.lineWidth=2;
	chart_style_options.legend.show=true;	
	chart_style_options.yaxis.min= null; // min. value to show, null means set automatically
	chart_style_options.legend.container = $("#womens_finish_times_over_time #legend-container");
	chart_style_options.xaxis.mode= "time";
	
	$.plot($("#womens_finish_times_over_time #placeholder"), chart_data.seriesData, chart_style_options);  
});
