$(document).ready(function() {

function converttoHHMMSS(secs){
	var t = new Date(1970,0,1);
	t.setSeconds(secs);
	return t.toTimeString().substr(0,8);
}


	$("#mens_finish_times_over_time #placeholder").bind("plothover", function (event, pos, item) {
	$("#x").text(pos.x.toFixed(2));
	$("#y").text(pos.y.toFixed(2));
	if (item) {
	$("#charttooltip").remove();
	var x = item.datapoint[0];//.toFixed(2),
	y = item.datapoint[1];//.toFixed(2);
	
	var d = new Date(x).getFullYear();
	
	
	showChartTooltip(item.pageX, item.pageY, item.series.label + " in " + d + ' was '+ converttoHHMMSS(y) );
	} else {
	$("#charttooltip").remove();
	}
	});
	
	var chart_data = {"seriesData":[{"data":[[28771200000,9973],[60307200000,9819],[91929600000,9707],[123465600000,9239],[155001600000,10414],[186537600000,9965],[218160000000,9963],[249696000000,10045],[281232000000,10674],[312768000000,10761],[344390400000,10489],[375926400000,10334],[407462400000,10402],[438998400000,10446],[470620800000,11606],[502156800000,11274],[533692800000,11201],[565228800000,11263],[596851200000,11422],[628387200000,11150],[659923200000,11553],[691459200000,11364],[723081600000,11263],[754617600000,11881],[786153600000,11789],[817689600000,11826],[849312000000,11804],[880848000000,11886],[912384000000,11742],[943920000000,11919],[975542400000,11898],[1007078400000,11881],[1038614400000,12057],[1070150400000,12391],[1101772800000,12420],[1133308800000,12272],[1164844800000,11777],[1196380800000,11892],[1228003200000,11675],[1259539200000,11708],[1291075200000,11868],[1322611200000,11764],[1385769600000,11902]],"label":"The fastest 20%"},{"data":[[28771200000,11028],[60307200000,11088],[91929600000,10397],[123465600000,10086],[155001600000,11694],[186537600000,11268],[218160000000,11324],[249696000000,11544],[281232000000,12455],[312768000000,12539],[344390400000,12090],[375926400000,11976],[407462400000,11992],[438998400000,12158],[470620800000,13752],[502156800000,13175],[533692800000,12988],[565228800000,13157],[596851200000,13274],[628387200000,12900],[659923200000,13467],[691459200000,13130],[723081600000,13059],[754617600000,13856],[786153600000,13701],[817689600000,13721],[849312000000,13732],[880848000000,13827],[912384000000,13738],[943920000000,13872],[975542400000,13843],[1007078400000,14019],[1038614400000,14088],[1070150400000,14586],[1101772800000,14721],[1133308800000,14628],[1164844800000,13844],[1196380800000,13963],[1228003200000,13677],[1259539200000,13651],[1291075200000,13763],[1322611200000,13784],[1385769600000,13706]],"label":"The second fastest 20%"},{"data":[[28771200000,12358],[60307200000,12256],[91929600000,10995],[123465600000,10653],[155001600000,12684],[186537600000,12338],[218160000000,12416],[249696000000,12596],[281232000000,13698],[312768000000,13808],[344390400000,13150],[375926400000,13088],[407462400000,13046],[438998400000,13303],[470620800000,15262],[502156800000,14478],[533692800000,14165],[565228800000,14414],[596851200000,14534],[628387200000,14070],[659923200000,14766],[691459200000,14337],[723081600000,14257],[754617600000,15257],[786153600000,14997],[817689600000,14939],[849312000000,14981],[880848000000,15150],[912384000000,15042],[943920000000,15217],[975542400000,15136],[1007078400000,15451],[1038614400000,15498],[1070150400000,16114],[1101772800000,16287],[1133308800000,16244],[1164844800000,15198],[1196380800000,15344],[1228003200000,14989],[1259539200000,14931],[1291075200000,15080],[1322611200000,15174],[1385769600000,14930]],"label":"The third fastest 20%"},{"data":[[28771200000,14674],[60307200000,13503],[91929600000,11397],[123465600000,11130],[155001600000,14157],[186537600000,13634],[218160000000,13722],[249696000000,13682],[281232000000,15074],[312768000000,15207],[344390400000,14276],[375926400000,14256],[407462400000,14187],[438998400000,14512],[470620800000,16825],[502156800000,15978],[533692800000,15585],[565228800000,15890],[596851200000,15985],[628387200000,15432],[659923200000,16272],[691459200000,15775],[723081600000,15713],[754617600000,16770],[786153600000,16505],[817689600000,16409],[849312000000,16518],[880848000000,16692],[912384000000,16593],[943920000000,16764],[975542400000,16705],[1007078400000,16982],[1038614400000,17070],[1070150400000,17736],[1101772800000,17972],[1133308800000,17947],[1164844800000,16739],[1196380800000,16913],[1228003200000,16580],[1259539200000,16512],[1291075200000,16681],[1322611200000,16823],[1385769600000,16551]],"label":"The fourth fastest 20%"},{"data":[[28771200000,17242],[60307200000,15579],[91929600000,11785],[123465600000,11398],[155001600000,16975],[186537600000,15400],[218160000000,15843],[249696000000,15715],[281232000000,17557],[312768000000,17797],[344390400000,16651],[375926400000,16750],[407462400000,16628],[438998400000,17054],[470620800000,19467],[502156800000,18744],[533692800000,18333],[565228800000,18837],[596851200000,19031],[628387200000,18443],[659923200000,19373],[691459200000,18956],[723081600000,18968],[754617600000,19851],[786153600000,19587],[817689600000,19675],[849312000000,19618],[880848000000,19921],[912384000000,19880],[943920000000,20038],[975542400000,20094],[1007078400000,20140],[1038614400000,20347],[1070150400000,20938],[1101772800000,21272],[1133308800000,21199],[1164844800000,19904],[1196380800000,20128],[1228003200000,19901],[1259539200000,19794],[1291075200000,20094],[1322611200000,20105],[1385769600000,19930]],"label":"The slowest 20%"}], "topLabel":"Men's finish times 1970 to 2013", "yAxis":"Seconds", "xAxis":"Year"};

	$("#mens_finish_times_over_time #top-label").html(chart_data.topLabel);
  
  	$("#mens_finish_times_over_time #x-axis-label").html(chart_data.xAxis);
	
	$("#mens_finish_times_over_time #y-axis-label").html(chart_data.yAxis);
	$("#mens_finish_times_over_time #y-axis-label").flipv_up();



	chart_style_options.xaxis.ticks = chart_data.xAxisTicksLabels;
	chart_style_options.series.lines.fill=false;
	chart_style_options.series.lines.lineWidth=2;
	chart_style_options.legend.show=true;	
	chart_style_options.yaxis.min= null; // min. value to show, null means set automatically
	chart_style_options.legend.container = $("#mens_finish_times_over_time #legend-container");
	chart_style_options.xaxis.mode= "time";
	
	$.plot($("#mens_finish_times_over_time #placeholder"), chart_data.seriesData, chart_style_options);  
});
