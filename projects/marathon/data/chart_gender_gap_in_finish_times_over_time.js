$(document).ready(function() {

function converttoHHMMSS(secs){
	var t = new Date(1970,0,1);
	t.setSeconds(secs);
	return t.toTimeString().substr(0,8);
}


	$("#chart_gender_gap_in_finish_times_over_time #placeholder").bind("plothover", function (event, pos, item) {
	$("#x").text(pos.x.toFixed(2));
	$("#y").text(pos.y.toFixed(2));
	if (item) {
	$("#charttooltip").remove();
	var x = item.datapoint[0];//.toFixed(2),
	y = item.datapoint[1];//.toFixed(2);
	
	var d = new Date(x).getFullYear();
	
	
showChartTooltip(item.pageX, item.pageY, item.series.label + " in " + d + " had a gap of "+ converttoHHMMSS(y) );

	} else {
	$("#charttooltip").remove();
	}
	});
	
	var chart_data = {"seriesData":[{"data":[[344390400000,1640],[375926400000,1539],[407462400000,1342],[438998400000,1438],[470620800000,1455],[502156800000,1352],[533692800000,1541],[565228800000,1642],[596851200000,1605],[628387200000,1623],[659923200000,1634],[691459200000,1665],[723081600000,1813],[754617600000,1574],[786153600000,1743],[817689600000,1841],[849312000000,1703],[880848000000,1846],[912384000000,1775],[943920000000,1731],[975542400000,1644],[1007078400000,1419],[1038614400000,1541],[1070150400000,1482],[1101772800000,1461],[1133308800000,1490],[1164844800000,1562],[1196380800000,1367],[1228003200000,1448],[1259539200000,1539],[1291075200000,1465],[1322611200000,1460],[1385769600000,1583]],"label":"The fastest 20%"},{"data":[[344390400000,1726],[375926400000,1701],[407462400000,1564],[438998400000,1689],[470620800000,1470],[502156800000,1537],[533692800000,1623],[565228800000,1666],[596851200000,1661],[628387200000,1728],[659923200000,1727],[691459200000,1758],[723081600000,1831],[754617600000,1614],[786153600000,1864],[817689600000,1934],[849312000000,1699],[880848000000,1840],[912384000000,1806],[943920000000,1777],[975542400000,1753],[1007078400000,1482],[1038614400000,1580],[1070150400000,1566],[1101772800000,1529],[1133308800000,1436],[1164844800000,1515],[1196380800000,1364],[1228003200000,1452],[1259539200000,1531],[1291075200000,1500],[1322611200000,1470],[1385769600000,1614]],"label":"The second fastest 20%"},{"data":[[344390400000,1734],[375926400000,1786],[407462400000,1536],[438998400000,1678],[470620800000,1291],[502156800000,1580],[533692800000,1788],[565228800000,1752],[596851200000,1751],[628387200000,1792],[659923200000,1776],[691459200000,1829],[723081600000,1970],[754617600000,1555],[786153600000,1879],[817689600000,2021],[849312000000,1743],[880848000000,1834],[912384000000,1868],[943920000000,1817],[975542400000,1864],[1007078400000,1406],[1038614400000,1513],[1070150400000,1507],[1101772800000,1531],[1133308800000,1320],[1164844800000,1536],[1196380800000,1386],[1228003200000,1584],[1259539200000,1597],[1291075200000,1569],[1322611200000,1538],[1385769600000,1756]],"label":"The third fastest 20%"},{"data":[[344390400000,1847],[375926400000,1952],[407462400000,1715],[438998400000,1789],[470620800000,1131],[502156800000,1547],[533692800000,1753],[565228800000,1702],[596851200000,1806],[628387200000,1926],[659923200000,1812],[691459200000,1873],[723081600000,2052],[754617600000,1536],[786153600000,1844],[817689600000,2064],[849312000000,1635],[880848000000,1714],[912384000000,1756],[943920000000,1715],[975542400000,1806],[1007078400000,1336],[1038614400000,1518],[1070150400000,1491],[1101772800000,1564],[1133308800000,1237],[1164844800000,1523],[1196380800000,1343],[1228003200000,1577],[1259539200000,1551],[1291075200000,1625],[1322611200000,1532],[1385769600000,1730]],"label":"The fourth fastest 20%"},{"data":[[344390400000,1900],[375926400000,1920],[407462400000,2088],[438998400000,1878],[470620800000,1422],[502156800000,1763],[533692800000,2111],[565228800000,2021],[596851200000,2499],[628387200000,2393],[659923200000,2235],[691459200000,2312],[723081600000,2486],[754617600000,1928],[786153600000,2312],[817689600000,2597],[849312000000,2300],[880848000000,2196],[912384000000,2235],[943920000000,2347],[975542400000,2268],[1007078400000,1709],[1038614400000,1929],[1070150400000,1713],[1101772800000,1831],[1133308800000,1552],[1164844800000,1901],[1196380800000,1598],[1228003200000,1953],[1259539200000,1839],[1291075200000,1747],[1322611200000,1657],[1385769600000,1787]],"label":"The slowest 20%"}], "topLabel":"Gap between the Men and Women's finish times 1980 to 2013", "yAxis":"Seconds", "xAxis":"Year"};

	$("#chart_gender_gap_in_finish_times_over_time #top-label").html(chart_data.topLabel);
  
  	$("#chart_gender_gap_in_finish_times_over_time #x-axis-label").html(chart_data.xAxis);
	
	$("#chart_gender_gap_in_finish_times_over_time #y-axis-label").html(chart_data.yAxis);
	$("#chart_gender_gap_in_finish_times_over_time #y-axis-label").flipv_up();



	chart_style_options.xaxis.ticks = chart_data.xAxisTicksLabels;
	chart_style_options.colors =  ["#70B0FF", "#EB53F7"]; 
	chart_style_options.series.lines.fill=false;
	chart_style_options.series.lines.lineWidth=2;
	chart_style_options.legend.show=true;	
	chart_style_options.yaxis.min= null; // min. value to show, null means set automatically
	chart_style_options.legend.container = $("#chart_gender_gap_in_finish_times_over_time #legend-container");
	chart_style_options.xaxis.mode= "time";
	
	$.plot($("#chart_gender_gap_in_finish_times_over_time #placeholder"), chart_data.seriesData, chart_style_options);  
});
